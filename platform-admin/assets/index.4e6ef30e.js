var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,i=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&s(t,n,e[n]);if(a)for(var n of a(e))o.call(e,n)&&s(t,n,e[n]);return t},l=(t,a)=>e(t,n(a));import{V as u,_ as c,j as p,k as m,n as d,o as f,p as h,q as v,r as x,s as w,t as y,u as _,w as g,l as D,x as C,y as S,z as P,A as $,B as b,C as k,E as M,F as j,G as A,I as E,J as I,K as O}from"./vendor.23ac6402.js";import{n as L,g as B,a as T}from"./index.8431394d.js";import{u as z}from"./index.esm.3b94485e.js";var N=u.extend({data:()=>({loading:!1,loadingMinInterval:800}),mounted(){let t,e=+new Date;const n=()=>{this.loading=!0,e=+new Date},a=()=>{clearTimeout(t);const n=this.loadingMinInterval,r=+new Date-e;r>=n?this.loading=!1:t=setTimeout(a,n-r)},r=()=>this.$store.state.theme.loading?n():a();this.$root.$on("loadingChange",r),this.$on("hook:beforeDestroy",(()=>{clearTimeout(t),this.$root.$off("loadingChange",r)}))}});const F={name:"Menus",props:{list:{type:Array,default:()=>[]},root:{type:Boolean,default:!1},level:{type:Number,default:0},parentPaths:{type:Array}}},q={};var G=L(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.root?n(c,[n("Menus",{attrs:{list:t.list,"parent-paths":t.parentPaths}})],1):n("div",[t._l(t.list,(function(e){var a=e.id,r=e.name,o=e.path,s=e.title,i=e.icon,l=e.children;return[l&&l.length?[n(p,{key:a,attrs:{group:t.parentPaths.concat(o).join("/")},scopedSlots:t._u([{key:"activator",fn:function(){return[n(m,{staticClass:"mr-2"},[n(d,{domProps:{textContent:t._s(i)}})],1),n(f,{domProps:{textContent:t._s(s)}})]},proxy:!0}],null,!0)},[n("Menus",{attrs:{list:l,level:t.level+1,"parent-paths":t.parentPaths.concat(o)}})],1)]:n(h,{key:a,class:"pl-"+(4+3*t.level),attrs:{to:{name:r},link:""}},[n(m,{staticClass:"mr-2"},[n(d,{domProps:{textContent:t._s(i)}})],1),n(f,{domProps:{textContent:t._s(s)}})],1)]}))],2)}),[],!1,H,null,null,null);function H(t){for(let e in q)this[e]=q[e]}var J=function(){return G.exports}(),K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(v,{attrs:{value:t.value,app:""},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n(h,{attrs:{ripple:!1},on:{click:t.toAdminDefault}},[n(x,[n(d,{attrs:{"x-large":""},domProps:{textContent:t._s(t.logoIcon)}})],1),n(f,{staticClass:"text-h6",domProps:{textContent:t._s(t.title)}})],1)]},proxy:!0}])},[n(w),n("Menus",{attrs:{list:t.adminMenuList,"parent-paths":[t.menusParentPaths],root:""}})],1)},U=[];const V=y({props:{value:{type:Boolean}},setup(){const t=z(360);return{logoIcon:_((()=>"mdi-hexagon-slice-"+(t.value%6+1)))}},data(){const t=T();return{title:B().adminTitle,adminType:t,menusParentPaths:""}},computed:l(i({},g({auth:t=>t.auth.info})),{adminMenuList(){if(!this.auth.id)return[];return this.formatAdminMenuList(this.$router.options.routes.find((({path:t})=>"/"===t)).children)}}),methods:{toAdminDefault(){const t=`${D.exports.upperFirst(D.exports.camelCase(this.adminType))}/Default`;this.$route.name!==t&&this.$router.push({name:t})},formatAdminMenuList(t,e=[]){return null==t||t.forEach((t=>{var n,a,r;!0!==(null==(n=t.meta)?void 0:n.hidden)&&e.push({id:D.exports.uniqueId(),name:t.name,path:t.path,title:(null==(a=t.meta)?void 0:a.title)||t.name||t.path,icon:(null==(r=t.meta)?void 0:r.icon)||"mdi-circle-medium",children:this.formatAdminMenuList(t.children)})})),e}},components:{Menus:J}}),Q={};var R=L(V,K,U,!1,W,null,null,null);function W(t){for(let e in Q)this[e]=Q[e]}var X=function(){return R.exports}(),Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(v,{attrs:{value:t.value,temporary:"",fixed:"",right:""},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("div",{staticClass:"text-h5 text-center my-3",domProps:{textContent:t._s(t.adminName)}}),n(w),n(c,{attrs:{"three-line":""}},[n(h,[n(x,[n(d,{attrs:{size:"50"}},[t._v("mdi-account-circle")])],1),n(C,[n(f,{domProps:{textContent:t._s(t.auth.name||t.auth.username)}}),t.auth.organization&&t.auth.organization.name?n(S,{domProps:{textContent:t._s(t.auth.organization.name)}}):t._e(),n(S,{domProps:{textContent:t._s(t.auth.email)}}),n(S,{domProps:{textContent:t._s(t.auth.phone)}})],1)],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("div",{staticClass:"pa-3"},[n(P,{attrs:{color:"primary",block:""},on:{click:t.logout}},[t._v("退出登录")])],1)]},proxy:!0}])})},Z=[];const tt={props:{value:{type:Boolean}},data:()=>({adminName:B().name}),computed:i({},g({auth:t=>t.auth.info})),methods:{logout(){this.$store.dispatch("auth/logout").finally((()=>{const t=T(),e=D.exports.upperFirst(D.exports.camelCase(t));this.$router.replace({name:`${e}/Login`})}))}}},et={};var nt=L(tt,Y,Z,!1,at,null,null,null);function at(t){for(let e in et)this[e]=et[e]}var rt=function(){return nt.exports}(),ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n($,{attrs:{elevation:"0",color:"transparent"}},[n("div",{staticClass:"navbar d-flex align-center white rounded-lg px-4"},[n(P,{attrs:{icon:""},on:{click:function(e){return t.$emit("update:menuDrawerState",!t.menuDrawerState)}}},[n(d,[t._v("mdi-menu")])],1),t.title?n("span",{staticClass:"ml-2",domProps:{textContent:t._s(t.title)}}):t._e(),n(b),n(k,{staticClass:"py-5",attrs:{color:"transparent",pill:""},on:{click:function(e){return t.$emit("update:infoDrawerState",!t.infoDrawerState)}}},[t._v(" Hi, "+t._s(t.auth.name||t.auth.username)+" "),n(M,{staticClass:"ml-2 align-center"},[n(d,{attrs:{large:""}},[t._v("mdi-account-circle")])],1)],1),t.loading?n(j,{attrs:{absolute:"",rounded:"",indeterminate:""}}):t._e()],1)])},st=[];const it=N.extend({props:{menuDrawerState:{type:Boolean},infoDrawerState:{type:Boolean}},computed:l(i({},g({auth:t=>t.auth.info})),{title:({$route:t})=>t.meta&&t.meta.title})}),lt={};var ut=L(it,ot,st,!1,ct,"5b81666a",null,null);function ct(t){for(let e in lt)this[e]=lt[e]}var pt=function(){return ut.exports}();const mt={};var dt=L({},(function(){var t=this.$createElement;return(this._self._c||t)(A,{attrs:{type:"table"}})}),[],!1,ft,"0c025e02",null,null);function ft(t){for(let e in mt)this[e]=mt[e]}var ht=function(){return dt.exports}(),vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(E,[n("MenuDrawer",{model:{value:t.menuDrawerState,callback:function(e){t.menuDrawerState=e},expression:"menuDrawerState"}}),n(I,[n("Navbar",{attrs:{"menu-drawer-state":t.menuDrawerState,"info-drawer-state":t.infoDrawerState},on:{"update:menuDrawerState":function(e){t.menuDrawerState=e},"update:menu-drawer-state":function(e){t.menuDrawerState=e},"update:infoDrawerState":function(e){t.infoDrawerState=e},"update:info-drawer-state":function(e){t.infoDrawerState=e}}}),n("div",{staticClass:"content"},[n(O,[t.loading?n("Loading"):n("router-view")],1)],1)],1),n("InfoDrawer",{model:{value:t.infoDrawerState,callback:function(e){t.infoDrawerState=e},expression:"infoDrawerState"}})],1)},xt=[];const wt=N.extend({data(){return{menuDrawerState:this.$vuetify.breakpoint.lgAndUp,infoDrawerState:!1}},components:{MenuDrawer:X,InfoDrawer:rt,Navbar:pt,Loading:ht}}),yt={};var _t=L(wt,vt,xt,!1,gt,"4165f080",null,null);function gt(t){for(let e in yt)this[e]=yt[e]}var Dt=function(){return _t.exports}();export default Dt;
