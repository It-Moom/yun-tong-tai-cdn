var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,i=(t,e)=>{for(var n in e||(e={}))r.call(e,n)&&s(t,n,e[n]);if(a)for(var n of a(e))o.call(e,n)&&s(t,n,e[n]);return t},u=(t,a)=>e(t,n(a));import{V as l,_ as c,j as p,k as m,n as d,o as f,p as h,q as v,r as x,s as w,t as y,u as _,w as g,l as D,x as C,y as S,z as P,A as $,B as b,C as k,E as M,F as j,G as A,I as E,J as I,K as O}from"./vendor.23ac6402.js";import{n as L,t as B,g as z,a as N}from"./index.a326922c.js";import{u as T}from"./index.esm.3b94485e.js";var F=l.extend({data:()=>({loading:!1,loadingMinInterval:800}),mounted(){let t,e=+new Date;const n=()=>{this.loading=!0,e=+new Date},a=()=>{clearTimeout(t);const n=this.loadingMinInterval,r=+new Date-e;r>=n?this.loading=!1:t=setTimeout(a,n-r)},r=()=>this.$store.state.theme.loading?n():a();this.$root.$on("loadingChange",r),this.$on("hook:beforeDestroy",(()=>{clearTimeout(t),this.$root.$off("loadingChange",r)}))}});const q={name:"Menus",props:{list:{type:Array,default:()=>[]},root:{type:Boolean,default:!1},level:{type:Number,default:0},parentPaths:{type:Array}}},G={};var H=L(q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.root?n(c,[n("Menus",{attrs:{list:t.list,"parent-paths":t.parentPaths}})],1):n("div",[t._l(t.list,(function(e){var a=e.id,r=e.name,o=e.path,s=e.title,i=e.icon,u=e.children;return[u&&u.length?[n(p,{key:a,attrs:{group:t.parentPaths.concat(o).join("/")},scopedSlots:t._u([{key:"activator",fn:function(){return[n(m,{staticClass:"mr-2"},[n(d,{domProps:{textContent:t._s(i)}})],1),n(f,{domProps:{textContent:t._s(s)}})]},proxy:!0}],null,!0)},[n("Menus",{attrs:{list:u,level:t.level+1,"parent-paths":t.parentPaths.concat(o)}})],1)]:n(h,{key:a,class:"pl-"+(4+3*t.level),attrs:{to:{name:r},link:""}},[n(m,{staticClass:"mr-2"},[n(d,{domProps:{textContent:t._s(i)}})],1),n(f,{domProps:{textContent:t._s(s)}})],1)]}))],2)}),[],!1,J,null,null,null);function J(t){for(let e in G)this[e]=G[e]}var K=function(){return H.exports}(),U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(v,{attrs:{value:t.value,app:""},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n(h,{attrs:{ripple:!1},on:{click:t.toAdminDefault}},[n(x,[n(d,{attrs:{"x-large":""},domProps:{textContent:t._s(t.logoIcon)}})],1),n(f,{staticClass:"text-h6",domProps:{textContent:t._s(t.title)}})],1)]},proxy:!0}])},[n(w),n("Menus",{attrs:{list:t.adminMenuList,"parent-paths":[t.menusParentPaths],root:""}})],1)},V=[];const Q=y({props:{value:{type:Boolean}},setup(){const t=T(360);return{logoIcon:_((()=>"mdi-hexagon-slice-"+(t.value%6+1)))}},data(){const t=z();return{title:B,adminType:t,menusParentPaths:""}},computed:u(i({},g({auth:t=>t.auth.info})),{adminMenuList(){if(!this.auth.id)return[];return this.formatAdminMenuList(this.$router.options.routes.find((({path:t})=>"/"===t)).children)}}),methods:{toAdminDefault(){const t=`${D.exports.upperFirst(D.exports.camelCase(this.adminType))}/Default`;this.$route.name!==t&&this.$router.push({name:t})},formatAdminMenuList(t,e=[]){return null==t||t.forEach((t=>{var n,a,r;!0!==(null==(n=t.meta)?void 0:n.hidden)&&e.push({id:D.exports.uniqueId(),name:t.name,path:t.path,title:(null==(a=t.meta)?void 0:a.title)||t.name||t.path,icon:(null==(r=t.meta)?void 0:r.icon)||"mdi-circle-medium",children:this.formatAdminMenuList(t.children)})})),e}},components:{Menus:K}}),R={};var W=L(Q,U,V,!1,X,null,null,null);function X(t){for(let e in R)this[e]=R[e]}var Y=function(){return W.exports}(),Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(v,{attrs:{value:t.value,temporary:"",fixed:"",right:""},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("div",{staticClass:"text-h5 text-center my-3",domProps:{textContent:t._s(t.adminName)}}),n(w),n(c,{attrs:{"three-line":""}},[n(h,[n(x,[n(d,{attrs:{size:"50"}},[t._v("mdi-account-circle")])],1),n(C,[n(f,{domProps:{textContent:t._s(t.auth.name||t.auth.username)}}),t.auth.organization&&t.auth.organization.name?n(S,{domProps:{textContent:t._s(t.auth.organization.name)}}):t._e(),n(S,{domProps:{textContent:t._s(t.auth.email)}}),n(S,{domProps:{textContent:t._s(t.auth.phone)}})],1)],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("div",{staticClass:"pa-3"},[n(P,{attrs:{color:"primary",block:""},on:{click:t.logout}},[t._v("退出登录")])],1)]},proxy:!0}])})},tt=[];const et={props:{value:{type:Boolean}},data:()=>({adminName:N().name}),computed:i({},g({auth:t=>t.auth.info})),methods:{logout(){this.$store.dispatch("auth/logout").finally((()=>{const t=z(),e=D.exports.upperFirst(D.exports.camelCase(t));this.$router.replace({name:`${e}/Login`})}))}}},nt={};var at=L(et,Z,tt,!1,rt,null,null,null);function rt(t){for(let e in nt)this[e]=nt[e]}var ot=function(){return at.exports}(),st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n($,{attrs:{elevation:"0",color:"transparent"}},[n("div",{staticClass:"navbar d-flex align-center white rounded-lg px-4"},[n(P,{attrs:{icon:""},on:{click:function(e){return t.$emit("update:menuDrawerState",!t.menuDrawerState)}}},[n(d,[t._v("mdi-menu")])],1),t.title?n("span",{staticClass:"ml-2",domProps:{textContent:t._s(t.title)}}):t._e(),n(b),n(k,{staticClass:"py-5",attrs:{color:"transparent",pill:""},on:{click:function(e){return t.$emit("update:infoDrawerState",!t.infoDrawerState)}}},[t._v(" Hi, "+t._s(t.auth.name||t.auth.username)+" "),n(M,{staticClass:"ml-2 align-center"},[n(d,{attrs:{large:""}},[t._v("mdi-account-circle")])],1)],1),t.loading?n(j,{attrs:{absolute:"",rounded:"",indeterminate:""}}):t._e()],1)])},it=[];const ut=F.extend({props:{menuDrawerState:{type:Boolean},infoDrawerState:{type:Boolean}},computed:u(i({},g({auth:t=>t.auth.info})),{title:({$route:t})=>t.meta&&t.meta.title})}),lt={};var ct=L(ut,st,it,!1,pt,"5b81666a",null,null);function pt(t){for(let e in lt)this[e]=lt[e]}var mt=function(){return ct.exports}();const dt={};var ft=L({},(function(){var t=this.$createElement;return(this._self._c||t)(A,{attrs:{type:"table"}})}),[],!1,ht,"0c025e02",null,null);function ht(t){for(let e in dt)this[e]=dt[e]}var vt=function(){return ft.exports}(),xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(E,[n("MenuDrawer",{model:{value:t.menuDrawerState,callback:function(e){t.menuDrawerState=e},expression:"menuDrawerState"}}),n(I,[n("Navbar",{attrs:{"menu-drawer-state":t.menuDrawerState,"info-drawer-state":t.infoDrawerState},on:{"update:menuDrawerState":function(e){t.menuDrawerState=e},"update:menu-drawer-state":function(e){t.menuDrawerState=e},"update:infoDrawerState":function(e){t.infoDrawerState=e},"update:info-drawer-state":function(e){t.infoDrawerState=e}}}),n("div",{staticClass:"content"},[n(O,[t.loading?n("Loading"):n("router-view")],1)],1)],1),n("InfoDrawer",{model:{value:t.infoDrawerState,callback:function(e){t.infoDrawerState=e},expression:"infoDrawerState"}})],1)},wt=[];const yt=F.extend({data(){return{menuDrawerState:this.$vuetify.breakpoint.lgAndUp,infoDrawerState:!1}},components:{MenuDrawer:Y,InfoDrawer:ot,Navbar:mt,Loading:vt}}),_t={};var gt=L(yt,xt,wt,!1,Dt,"4165f080",null,null);function Dt(t){for(let e in _t)this[e]=_t[e]}var Ct=function(){return gt.exports}();export default Ct;
